{"remainingRequest":"C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\src\\views\\app\\reports\\Index.vue?vue&type=style&index=0&id=7cc2bb48&lang=scss&scoped=true&","dependencies":[{"path":"C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\src\\views\\app\\reports\\Index.vue","mtime":1620857477174},{"path":"C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\flysoft\\Documents\\GitHub\\E-walletPlatform\\Front\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi52LXNoZWV0LS1vZmZzZXQgew0KICB0b3A6IC0yNHB4Ow0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQp9DQouY2FyZC1wcmVwZW5kIHsNCiAgd2lkdGg6IDkwJTsNCiAgbWFyZ2luLWxlZnQ6IDUlOw0KDQogIC5jYXJkLW9mZnNldCB7DQogICAgaGVpZ2h0OiAyMDBweDsNCiAgfQ0KDQogIC5jYXJkLWNvbnRlbnQgew0KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICB0b3A6IDA7DQogIH0NCn0NCg=="},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2xBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/app/reports","sourcesContent":["<template>\r\n  <v-container fluid grid-list-xl>\r\n    <v-dialog v-model=\"dialog\" width=\"600px\" height=\"auto\">\r\n      <v-card\r\n        v-if=\"itemToEdit === 'deposit'\"\r\n        elevation=\"15\"\r\n        height=\"800px\"\r\n        class=\"special-scroll depositForm\"\r\n      >\r\n        <v-card-title>Make a Deposit</v-card-title>\r\n        <v-stepper v-model=\"e6\" vertical>\r\n          <v-stepper-step :complete=\"e6 > 1\" step=\"1\"\r\n            >Register\r\n            <small>Fill in the details of the deposit</small></v-stepper-step\r\n          >\r\n          <v-stepper-content step=\"1\">\r\n            <v-row class=\"mx-2\">\r\n              <v-row v-show=\"editedSite.country\">\r\n                <v-col cols=\"6\">\r\n                  <v-select\r\n                    v-model=\"editedDeposit.accountName\"\r\n                    :items=\"villes\"\r\n                    @change=\"setZone()\"\r\n                    clearable\r\n                    prepend-inner-icon=\"mdi-camera-control\"\r\n                    label=\"Name Account\"\r\n                  />\r\n                </v-col>\r\n                <v-col cols=\"6\">\r\n                  <v-text-field\r\n                    v-model=\"editedSite.zone\"\r\n                    disabled\r\n                    prepend-inner-icon=\"mdi-orbit\"\r\n                    label=\"Account amount\"\r\n                  />\r\n                </v-col>\r\n              </v-row>\r\n              <v-col cols=\"6\">\r\n                <v-text-field\r\n                  v-model=\"editedDeposit.depositAmount\"\r\n                  clearable\r\n                  prepend-inner-icon=\"mdi-camera-iris\"\r\n                  label=\"Deposit amount\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"6\">\r\n                <v-text-field\r\n                  v-model=\"editedDeposit.phone\"\r\n                  clearable\r\n                  prepend-inner-icon=\"mdi-camera-control\"\r\n                  label=\"Phone Number\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"6\">\r\n                <v-text-field\r\n                  v-model=\"editedDeposit.email\"\r\n                  clearable\r\n                  :rules=\"[rules.required, rules.email]\"\r\n                  prepend-inner-icon=\"mdi-orbit\"\r\n                  label=\"E-mail\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"6\">\r\n                <v-menu\r\n                  v-model=\"menu2\"\r\n                  :close-on-content-click=\"false\"\r\n                  :nudge-right=\"40\"\r\n                  transition=\"scale-transition\"\r\n                  offset-y\r\n                  min-width=\"290px\"\r\n                >\r\n                  <template v-slot:activator=\"{ on }\">\r\n                    <v-text-field\r\n                      v-model=\"editedDeposit.date\"\r\n                      prepend-inner-icon=\"mdi-calendar\"\r\n                      label=\"Date\"\r\n                      readonly\r\n                      v-on=\"on\"\r\n                    />\r\n                  </template>\r\n                  <v-date-picker\r\n                    v-model=\"editedDeposit.date\"\r\n                    @input=\"menu2 = false\"\r\n                  ></v-date-picker>\r\n                </v-menu>\r\n              </v-col>\r\n              <v-col cols=\"12\">\r\n                <v-text-field\r\n                  v-model=\"editedSite.pays\"\r\n                  disabled\r\n                  prepend-inner-icon=\"mdi-orbit\"\r\n                  label=\"Pays\"\r\n                />\r\n                <!-- <v-select v-model=\"editedSite.pays\" :items=\"pays\" clearable prepend-inner-icon=\"mdi-camera-control\" label=\"Pays\" /> -->\r\n              </v-col>\r\n            </v-row>\r\n            <v-row>\r\n              <v-col\r\n                cols=\"12\"\r\n                v-show=\"\r\n                  editedDeposit.accountName && editedDeposit.depositAmount\r\n                \"\r\n              >\r\n                <v-chip\r\n                  light\r\n                  class=\"ma-2 elevation-5 white--text\"\r\n                  color=\"amber darken-3\"\r\n                  @click=\"save\"\r\n                >\r\n                  <v-avatar left><v-icon small>mdi-telegram</v-icon></v-avatar>\r\n                  <span>Save</span>\r\n                </v-chip>\r\n              </v-col>\r\n            </v-row>\r\n          </v-stepper-content>\r\n        </v-stepper>\r\n      </v-card>\r\n      <v-card\r\n        v-if=\"itemToEdit === 'Withdrawal'\"\r\n        elevation=\"15\"\r\n        height=\"800px\"\r\n        class=\"special-scroll depositForm\"\r\n      >\r\n        <v-card-title>Make a Withdrawal</v-card-title>\r\n        <v-stepper v-model=\"e6\" vertical>\r\n          <v-stepper-step :complete=\"e6 > 1\" step=\"1\"\r\n            >Register\r\n            <small>Fill in the details of the Withdrawal</small></v-stepper-step\r\n          >\r\n          <v-stepper-content step=\"1\">\r\n            <v-row class=\"mx-2\">\r\n              <v-row v-show=\"editedSite.country\">\r\n                <v-col cols=\"6\">\r\n                  <v-select\r\n                    v-model=\"editedWithdrawal.accountName\"\r\n                    :items=\"villes\"\r\n                    @change=\"setZone()\"\r\n                    clearable\r\n                    prepend-inner-icon=\"mdi-camera-control\"\r\n                    label=\"Name Account\"\r\n                  />\r\n                </v-col>\r\n                <v-col cols=\"6\">\r\n                  <v-text-field\r\n                    v-model=\"editedSite.zone\"\r\n                    disabled\r\n                    prepend-inner-icon=\"mdi-orbit\"\r\n                    label=\"Account amount\"\r\n                  />\r\n                </v-col>\r\n              </v-row>\r\n              <v-col cols=\"6\">\r\n                <v-text-field\r\n                  v-model=\"editedWithdrawal.depositAmount\"\r\n                  clearable\r\n                  prepend-inner-icon=\"mdi-camera-iris\"\r\n                  label=\"Withdrawal amount\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"6\">\r\n                <v-text-field\r\n                  v-model=\"editedWithdrawal.phone\"\r\n                  clearable\r\n                  prepend-inner-icon=\"mdi-camera-control\"\r\n                  label=\"Phone Number\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"6\">\r\n                <v-text-field\r\n                  v-model=\"editedWithdrawal.email\"\r\n                  clearable\r\n                  :rules=\"[rules.required, rules.email]\"\r\n                  prepend-inner-icon=\"mdi-orbit\"\r\n                  label=\"E-mail\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"6\">\r\n                <v-menu\r\n                  v-model=\"menu2\"\r\n                  :close-on-content-click=\"false\"\r\n                  :nudge-right=\"40\"\r\n                  transition=\"scale-transition\"\r\n                  offset-y\r\n                  min-width=\"290px\"\r\n                >\r\n                  <template v-slot:activator=\"{ on }\">\r\n                    <v-text-field\r\n                      v-model=\"editedWithdrawal.date\"\r\n                      prepend-inner-icon=\"mdi-calendar\"\r\n                      label=\"Date\"\r\n                      readonly\r\n                      v-on=\"on\"\r\n                    />\r\n                  </template>\r\n                  <v-date-picker\r\n                    v-model=\"editedWithdrawal.date\"\r\n                    @input=\"menu2 = false\"\r\n                  ></v-date-picker>\r\n                </v-menu>\r\n              </v-col>\r\n              <v-col cols=\"12\">\r\n                <v-text-field\r\n                  v-model=\"editedSite.pays\"\r\n                  disabled\r\n                  prepend-inner-icon=\"mdi-orbit\"\r\n                  label=\"Pays\"\r\n                />\r\n                <!-- <v-select v-model=\"editedSite.pays\" :items=\"pays\" clearable prepend-inner-icon=\"mdi-camera-control\" label=\"Pays\" /> -->\r\n              </v-col>\r\n            </v-row>\r\n            <v-row>\r\n              <v-col\r\n                cols=\"12\"\r\n                v-show=\"\r\n                  editedWithdrawal.accountName && editedWithdrawal.depositAmount\r\n                \"\r\n              >\r\n                <v-chip\r\n                  light\r\n                  class=\"ma-2 elevation-5 white--text\"\r\n                  color=\"amber darken-3\"\r\n                  @click=\"save\"\r\n                >\r\n                  <v-avatar left><v-icon small>mdi-telegram</v-icon></v-avatar>\r\n                  <span>Save</span>\r\n                </v-chip>\r\n              </v-col>\r\n            </v-row>\r\n          </v-stepper-content>\r\n        </v-stepper>\r\n      </v-card>\r\n    </v-dialog>\r\n    <v-layout wrap class=\"px-0\">\r\n      <v-flex sm12 xs12 md4 lg4>\r\n        <v-card class=\"mx-auto rounded\" height=\"auto\" tile>\r\n          <v-list-item three-line>\r\n            <v-list-item-content>\r\n              <div class=\"overline mb-4\">Total amount in the account</div>\r\n              <v-list-item-title\r\n                class=\"display-1\"\r\n                style=\"color: #0C0C0B\"\r\n                v-if=\"sites\"\r\n                >{{ totalAccount }}\r\n                <small class=\"caption font-weight-light\"\r\n                  >$</small\r\n                ></v-list-item-title\r\n              >\r\n            </v-list-item-content>\r\n\r\n            <v-list-item-avatar\r\n              size=\"80\"\r\n              tile\r\n              color=\"#0C0C0B\"\r\n              style=\"border-radius: 5px !important\"\r\n              class=\"elevation-5\"\r\n            >\r\n              <v-icon dark size=\"50\">mdi-currency-btc</v-icon>\r\n            </v-list-item-avatar>\r\n          </v-list-item>\r\n        </v-card>\r\n      </v-flex>\r\n      <v-flex sm12 xs12 md4 lg4>\r\n        <v-card class=\"mx-auto rounded\" tile>\r\n          <v-list-item three-line>\r\n            <v-list-item-content>\r\n              <div class=\"overline mb-4\">Total amount Withdrawn</div>\r\n              <v-list-item-title\r\n                class=\"display-1\"\r\n                style=\"color: #0C0C0B\"\r\n                v-if=\"sites\"\r\n                >{{ totalWithDraw }}\r\n                <small class=\"caption font-weight-light\"\r\n                  >$</small\r\n                ></v-list-item-title\r\n              >\r\n            </v-list-item-content>\r\n\r\n            <v-list-item-avatar\r\n              size=\"80\"\r\n              tile\r\n              color=\"#0C0C0B\"\r\n              style=\"border-radius: 5px !important\"\r\n              class=\"elevation-5\"\r\n            >\r\n              <v-icon dark size=\"40\">mdi-cash</v-icon>\r\n            </v-list-item-avatar>\r\n          </v-list-item>\r\n        </v-card>\r\n      </v-flex>\r\n      <v-flex sm12 xs12 md4 lg4>\r\n        <v-card class=\"mx-auto rounded\" tile>\r\n          <v-list-item three-line>\r\n            <v-list-item-content>\r\n              <div class=\"overline mb-4\">Total amount of Deposit</div>\r\n              <v-list-item-title\r\n                class=\"display-1\"\r\n                style=\"color: #0C0C0B\"\r\n                v-if=\"sites\"\r\n                >{{ totalDeposit }}\r\n                <small class=\"caption font-weight-light\"\r\n                  >$</small\r\n                ></v-list-item-title\r\n              >\r\n            </v-list-item-content>\r\n\r\n            <v-list-item-avatar\r\n              size=\"80\"\r\n              tile\r\n              color=\"#0C0C0B\"\r\n              style=\"border-radius: 5px !important\"\r\n              class=\"elevation-5\"\r\n            >\r\n              <v-icon dark size=\"40\">mdi-cash</v-icon>\r\n            </v-list-item-avatar>\r\n          </v-list-item>\r\n        </v-card>\r\n      </v-flex>\r\n      <v-flex sm12 xs12 md12 lg12>\r\n        <v-card tile class=\"mx-auto mt-5\">\r\n          <v-sheet\r\n            class=\"v-sheet--offset mx-auto py-3 px-3\"\r\n            color=\"#0C0C0B\"\r\n            elevation=\"10\"\r\n            max-width=\"calc(100% - 32px)\"\r\n          >\r\n            <v-card-text class=\"pt-0\">\r\n              <div class=\"headline font-weight-normal mb-0 white--text\">\r\n                List of the Recent Transactions\r\n                <div class=\"float-right\" style=\"position: relative; top: 35px\">\r\n                  <v-chip\r\n                    light\r\n                    class=\"ma-2 elevation-5 float-right white--text\"\r\n                    color=\"grey darken-3\"\r\n                    @click=\"(itemToEdit = 'deposit') && (dialog = !dialog)\"\r\n                    v-on=\"on\"\r\n                  >\r\n                    <v-avatar left><v-icon small>mdi-plus</v-icon></v-avatar>\r\n                    <span>Make a deposit</span>\r\n                  </v-chip>\r\n                </div>\r\n                <div class=\"float-right\" style=\"position: relative; top: 35px\">\r\n                  <v-chip\r\n                    light\r\n                    class=\"ma-2 elevation-5 float-right white--text\"\r\n                    color=\"grey darken-3\"\r\n                    @click=\"(itemToEdit = 'Withdrawal') && (dialog = !dialog)\"\r\n                    v-on=\"on\"\r\n                  >\r\n                    <v-avatar left><v-icon small>mdi-plus</v-icon></v-avatar>\r\n                    <span>Make a Withdrawal</span>\r\n                  </v-chip>\r\n                </div>\r\n              </div>\r\n            </v-card-text>\r\n          </v-sheet>\r\n\r\n          <v-card-text class=\"pt-0\" v-if=\"sites\">\r\n            <v-data-table\r\n              :headers=\"headers\"\r\n              :items=\"sites\"\r\n              :items-per-page=\"10\"\r\n              class=\"mb-3\"\r\n            >\r\n              <template v-slot:item.date=\"{ item }\">\r\n                <span>{{ new Date(item.date).toLocaleDateString() }}</span>\r\n              </template>\r\n              <template v-slot:item.action=\"{ item }\">\r\n                <v-chip\r\n                  outlined\r\n                  light\r\n                  class=\"ma-2 elevation-5\"\r\n                  color=\"amber darken-3\"\r\n                  @click=\"editSite(item)\"\r\n                >\r\n                  <v-avatar left\r\n                    ><v-icon small>mdi-pencil-outline</v-icon></v-avatar\r\n                  >\r\n                  <span>Modifier</span>\r\n                </v-chip>\r\n                <v-chip\r\n                  outlined\r\n                  light\r\n                  class=\"ma-2 elevation-5\"\r\n                  color=\"red darken-3\"\r\n                  @click=\"deleteSite(item)\"\r\n                >\r\n                  <v-avatar left\r\n                    ><v-icon small>mdi-delete-outline</v-icon></v-avatar\r\n                  >\r\n                  <span>Supprimer</span>\r\n                </v-chip>\r\n              </template>\r\n              <template v-slot:no-data>\r\n                <p class=\"dark mt-5\">Aucune site enrégistrée pour le moment</p>\r\n              </template>\r\n            </v-data-table>\r\n            <v-chip\r\n              outlined\r\n              light\r\n              class=\"ma-2 elevation-5\"\r\n              color=\"green darken-3\"\r\n              style=\"position: absolute; bottom: 15px; left: 110px\"\r\n              @click=\"printExcel()\"\r\n            >\r\n              <v-avatar left\r\n                ><v-icon small>mdi-microsoft-excel</v-icon></v-avatar\r\n              >\r\n              <span>Excel</span>\r\n            </v-chip>\r\n            <v-chip\r\n              outlined\r\n              light\r\n              class=\"ma-2 elevation-5\"\r\n              style=\"position: absolute; bottom: 15px\"\r\n              color=\"blue darken-3\"\r\n              @click=\"printCSV()\"\r\n            >\r\n              <v-avatar left\r\n                ><v-icon small>mdi-microsoft-windows-classic</v-icon></v-avatar\r\n              >\r\n              <span>CSV</span>\r\n            </v-chip>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-flex>\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport exportFromJSON from \"export-from-json\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      rules: {\r\n        required: value => !!value || \"Required.\",\r\n        counter: value => value.length <= 20 || \"Max 20 characters\",\r\n        email: value => {\r\n          const pattern = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n          return pattern.test(value) || \"Invalid e-mail.\";\r\n        }\r\n      },\r\n      currentUser: null,\r\n      editedIndex: -1,\r\n      itemToEdit: \"deposit\",\r\n      totalAccount: \"0\",\r\n      dialog: false,\r\n      totalDeposit: \"0\",\r\n      totalWithDraw: \"0\",\r\n      e6: 1,\r\n      menu2: false,\r\n      localisations: null,\r\n      editedSite: {\r\n        siteID: null,\r\n        userID: null,\r\n        typetransaction: \"\",\r\n        account: \"\",\r\n        email: \"\",\r\n        country: \"Cameroun\",\r\n        amount: \"\",\r\n        zone: \"\",\r\n        date: \"\"\r\n      },\r\n\r\n      newSite: {\r\n        depositID: null,\r\n        userID: null,\r\n        typetransaction: \"\",\r\n        phone: \"\",\r\n        email: \"\",\r\n        country: \"Cameroun\",\r\n        ville: \"\",\r\n        amount: \"\",\r\n        zone: \"\",\r\n        date: \"\"\r\n      },\r\n      editedDeposit: {\r\n        siteID: null,\r\n        userID: null,\r\n        accountName: null,\r\n        depositAmount: \"\",\r\n        phone: \"\",\r\n        email: \"\",\r\n        date: \"\"\r\n      },\r\n      newDeposit: {\r\n        depositID: null,\r\n        userID: null,\r\n        accountName: null,\r\n        depositAmount: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        date: \"\"\r\n      },\r\n      editedWithdrawal: {\r\n        siteID: null,\r\n        userID: null,\r\n        accountName: null,\r\n        depositAmount: \"\",\r\n        phone: \"\",\r\n        email: \"\",\r\n        date: \"\"\r\n      },\r\n      newWithdrawal: {\r\n        depositID: null,\r\n        userID: null,\r\n        accountName: null,\r\n        depositAmount: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        date: \"\"\r\n      },\r\n      sites: [],\r\n      deposits: [],\r\n      withdrawals: [],\r\n\r\n      // pays: [],\r\n      villes: [],\r\n      headers: [\r\n        { text: \"Type of transaction\", value: \"typetransaction\" },\r\n        { text: \"Name Account\", value: \"nom\" },\r\n        { text: \"Email\", value: \"email\" },\r\n        { text: \"Country\", value: \"country\" },\r\n        { text: \"Amount\", value: \"amount\" },\r\n        { text: \"Date\", value: \"date\" },\r\n        { text: \"\", value: \"action\", sortable: false }\r\n      ]\r\n    };\r\n  },\r\n  watch: {\r\n    dialog(val) {\r\n      val || this.close();\r\n    }\r\n  },\r\n  methods: {\r\n    printCSV() {\r\n      const items = this.sites;\r\n      const replacer = (key, value) => (value === null ? \"\" : value); // specify how you want to handle null values here\r\n      const header = Object.keys(items[0]);\r\n      let csv = items.map(row =>\r\n        header\r\n          .map(fieldName => JSON.stringify(row[fieldName], replacer))\r\n          .join(\",\")\r\n      );\r\n      let link = document.createElement(\"a\");\r\n\r\n      csv.unshift(header.join(\",\"));\r\n      csv = csv.join(\"\\r\\n\");\r\n\r\n      link.href = \"data:text/csv;charset=utf-8,\" + encodeURIComponent(csv);\r\n      link.download = \"testCsv.csv\";\r\n      link.click();\r\n    },\r\n\r\n    printExcel() {\r\n      const data = this.sites;\r\n      const fileName = \"textExcel\";\r\n      const exportType = exportFromJSON.types.xls;\r\n\r\n      exportFromJSON({ data, fileName, exportType });\r\n    },\r\n\r\n    saveToLocal() {\r\n      let data = JSON.stringify(this.sites);\r\n      window.localStorage.setItem(\"sites-\" + this.currentUser.id, data);\r\n    },\r\n\r\n    editSite(item) {\r\n      this.editedIndex = this.sites.indexOf(item);\r\n      this.editedSite = Object.assign({}, item);\r\n      this.dialog = true;\r\n    },\r\n\r\n    deleteSite(item) {\r\n      const index = this.sites.indexOf(item);\r\n      if (confirm(\"Are you sure you want to delete this transaction?\")) {\r\n        this.sites.splice(index, 1);\r\n        console.log(item.amount);\r\n        if (item.typetransaction == \"deposit\") {\r\n          this.totalDeposit =\r\n            parseFloat(this.totalDeposit) - parseFloat(item.amount);\r\n            window.localStorage.setItem(\"totalAmount\",JSON.stringify(this.totalDeposit))\r\n        }else{\r\n          this.totalAccount = parseFloat(this.totalAccount) + parseFloat(item.amount)\r\n          this.totalWithDraw = parseFloat(this.totalWithDraw) - parseFloat(item.amount)\r\n            window.localStorage.setItem(\"totalAmountWithDraw\",JSON.stringify(this.totalWithDraw))\r\n        }\r\n\r\n        this.saveToLocal();\r\n      }\r\n      window.location.reload()\r\n    },\r\n\r\n    setZone() {\r\n      this.localisations.forEach(local => {\r\n        if (local.region === this.editedSite.ville) {\r\n          this.editedSite.zone = local.amount;\r\n          this.editedSite.pays = local.adresse;\r\n        }\r\n      });\r\n    },\r\n\r\n    close() {\r\n      this.dialog = false;\r\n      setTimeout(() => {\r\n        this.editedSite = Object.assign({}, this.newSite);\r\n        this.editedIndex = -1;\r\n        this.e6 = 1;\r\n      }, 300);\r\n    },\r\n\r\n    save() {\r\n      if (this.editedIndex > -1) {\r\n        Object.assign(this.sites[this.editedIndex], this.editedSite);\r\n      } else {\r\n        if (this.itemToEdit == \"deposit\") {\r\n          this.deposits.push({\r\n            depositID: Math.floor(new Date() * Math.random() * Math.floor(9)),\r\n            userID: this.currentUser.id,\r\n            accountName: this.editedDeposit.accountName,\r\n            depositAmount: this.editedDeposit.depositAmount,\r\n            phone: this.editedDeposit.phone,\r\n            email: this.editedDeposit.email,\r\n            date: this.editedDeposit.date\r\n          });\r\n          window.localStorage.setItem(\r\n            \"deposits\",\r\n            JSON.stringify(this.deposits)\r\n          );\r\n          this.sites.push({\r\n            siteID: Math.floor(new Date() * Math.random() * Math.floor(9)),\r\n            userID: this.currentUser.id,\r\n            typetransaction: this.itemToEdit,\r\n            nom: this.editedDeposit.accountName,\r\n            adresse: this.editedSite.adresse,\r\n            email: this.editedDeposit.email,\r\n            amount: this.editedDeposit.depositAmount,\r\n            ville: this.editedSite.country,\r\n            date: this.editedDeposit.date\r\n          });\r\n\r\n          if (\r\n            window.localStorage.getItem(\"totalAmount\") !== null &&\r\n            window.localStorage.getItem(\"totalAmount\")\r\n          ) {\r\n            let localAmount = JSON.parse(\r\n              window.localStorage.getItem(\"totalAmount\")\r\n            );\r\n\r\n            let total =\r\n              parseFloat(localAmount) +\r\n              parseFloat(this.editedDeposit.depositAmount);\r\n            console.log(total);\r\n            window.localStorage.setItem(\"totalAmount\", JSON.stringify(total));\r\n            this.totalAccount =\r\n              this.editedDeposit.depositAmount + this.totalAccount;\r\n          } else {\r\n            this.totalDeposit = this.editedDeposit.depositAmount;\r\n            window.localStorage.setItem(\r\n              \"totalAmount\",\r\n              JSON.stringify(this.totalDeposit)\r\n            );\r\n          }\r\n        } else {\r\n          if (this.editedWithdrawal.depositAmount <= this.totalAccount) {\r\n            this.withdrawals.push({\r\n              withdrawID: Math.floor(\r\n                new Date() * Math.random() * Math.floor(9)\r\n              ),\r\n              userID: this.currentUser.id,\r\n              accountName: this.editedWithdrawal.accountName,\r\n              depositAmount: this.editedWithdrawal.depositAmount,\r\n              phone: this.editedWithdrawal.phone,\r\n              email: this.editedWithdrawal.email,\r\n              date: this.editedWithdrawal.date\r\n            });\r\n            window.localStorage.setItem(\r\n              \"withdrawals\",\r\n              JSON.stringify(this.withdrawals)\r\n            );\r\n            this.sites.push({\r\n              siteID: Math.floor(new Date() * Math.random() * Math.floor(9)),\r\n              userID: this.currentUser.id,\r\n              typetransaction: this.itemToEdit,\r\n              nom: this.editedWithdrawal.accountName,\r\n              adresse: this.editedSite.adresse,\r\n              email: this.editedWithdrawal.email,\r\n              amount: this.editedWithdrawal.depositAmount,\r\n              ville: this.editedSite.country,\r\n              date: this.editedWithdrawal.date\r\n            });\r\n\r\n            if (\r\n              window.localStorage.getItem(\"totalAmountWithDraw\") !== null &&\r\n              window.localStorage.getItem(\"totalAmountWithDraw\")\r\n            ) {\r\n              let localAmountWithDraw = JSON.parse(window.localStorage.getItem(\"totalAmountWithDraw\"));\r\n\r\n              let total =\r\n                parseFloat(localAmountWithDraw) +\r\n                parseFloat(this.editedWithdrawal.depositAmount);\r\n              console.log(total);\r\n              window.localStorage.setItem(\r\n                \"totalAmountWithDraw\",\r\n                JSON.stringify(total)\r\n              );\r\n            } else {\r\n              console.log(\"c'est le bon emplacement\")\r\n            this.totalAccount = parseFloat(this.totalAccount) - parseFloat(this.editedWithdrawal.depositAmount)\r\n             window.localStorage.setItem(\r\n              \"totalAmount\",\r\n              JSON.stringify(this.totalAccount)\r\n            );\r\n              this.depositAmount = this.editedWithdrawal.depositAmount;\r\n              window.localStorage.setItem(\r\n                \"totalAmountWithDraw\",\r\n                JSON.stringify(this.depositAmount)\r\n              );\r\n\r\n            }\r\n          } else {\r\n            alert(\"Your Account is insufficient to withdraw this amount\");\r\n          }\r\n        }\r\n        // let local = window.localStorage.getItem(\"jules-account\")\r\n      }\r\n      this.saveToLocal();\r\n      this.close();\r\n      window.location.reload();\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.currentUser = JSON.parse(\r\n      window.localStorage.getItem(\"jules-user-connected\")\r\n    );\r\n    if (\r\n      window.localStorage.getItem(\"sites-\" + this.currentUser.id) !== null &&\r\n      window.localStorage.getItem(\"sites-\" + this.currentUser.id).length > 0\r\n    ) {\r\n      let MyTotalAmount;\r\n      let localAmount = JSON.parse(window.localStorage.getItem(\"totalAmount\"));\r\n      if (\r\n        window.localStorage.getItem(\"totalAmount\") !== null &&\r\n        window.localStorage.getItem(\"totalAmount\")\r\n      ) {\r\n        this.totalDeposit = JSON.parse(\r\n          window.localStorage.getItem(\"totalAmount\")\r\n        );\r\n        this.localisations = JSON.parse(\r\n          window.localStorage.getItem(\"jules-account\")\r\n        );\r\n        this.localisations.forEach(local => {\r\n          if (local.statut == 0) {\r\n            let som = local.amount;\r\n            console.log(parseFloat(localAmount));\r\n            MyTotalAmount = parseFloat(localAmount) + parseFloat(som);\r\n            this.totalAccount = MyTotalAmount;\r\n          }\r\n        });\r\n      } else {\r\n        this.localisations = JSON.parse(\r\n          window.localStorage.getItem(\"jules-account\")\r\n        );\r\n        this.localisations.forEach(local => {\r\n          if (local.statut == 0) {\r\n            let som = 0;\r\n            this.totalAccount = som + parseFloat(local.amount);\r\n          }\r\n        });\r\n        this.totalWithDraw =JSON.parse(window.localStorage.getItem(\"totalAmountWithDraw\"))\r\n      }\r\n      this.sites = JSON.parse(\r\n        window.localStorage.getItem(\"sites-\" + this.currentUser.id)\r\n      );\r\n    }\r\n    if (window.localStorage.getItem(\"jules-account\") !== null && window.localStorage.getItem(\"jules-account\").length > 0 ) {\r\n      if(window.localStorage.getItem(\"totalAmountWithDraw\") !==null && window.localStorage.getItem(\"totalAmountWithDraw\").length >0){\r\n        this.totalWithDraw =JSON.parse(window.localStorage.getItem(\"totalAmountWithDraw\"))\r\n      }\r\n      this.localisations = JSON.parse(window.localStorage.getItem(\"jules-account\"));\r\n      console.log(this.localisations);\r\n      this.localisations.forEach(local => {\r\n        if (local.statut == 0) {\r\n          let dat = local.nom + \"\" + local.prenom;\r\n          this.villes.push(JSON.stringify(dat));\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.v-sheet--offset {\r\n  top: -24px;\r\n  position: relative;\r\n}\r\n.card-prepend {\r\n  width: 90%;\r\n  margin-left: 5%;\r\n\r\n  .card-offset {\r\n    height: 200px;\r\n  }\r\n\r\n  .card-content {\r\n    position: absolute;\r\n    top: 0;\r\n  }\r\n}\r\n</style>\r\n"]}]}